<app-modal (cancel)="close.emit()" (save)="onSubmit()" title="Add Inventory Transaction">
  <form [formGroup]="form">
    <div class="form-grid">
      <div class="form-row w-3">
        <label class="form-label">Date</label>
        <app-datepicker formControlName="operationDate"></app-datepicker>
      </div>

      <div class="form-row w-3">
        <label>Type</label>
        <app-select [clearable]="false" [items]="['IN', 'OUT']" [searchable]="false"
                    formControlName="type"></app-select>
      </div>

      <div class="form-row w-3">
        <label>Subtype</label>
        <app-select [items]="subtypes()" bindLabel="name" bindValue="id" formControlName="subtype"></app-select>
      </div>

    </div>

    <hr/>

    <div>
      <h3>Add Product</h3>
      <div class="form-grid">
        <div class="form-row product-input">
          <select>
            <option value="fixed">Prod 1</option>
            <option value="percentage">Prod 2</option>
          </select>
        </div>
        <div class="form-row number-input">
          <input placeholder="Quantity" type="number"/>
        </div>
        <div class="form-row number-input">
          <input placeholder="Unit Price" type="number"/>
        </div>
        <div class="form-row number-input">
          <input placeholder="Discount" type="number"/>
        </div>
        <div class="form-row">
          <select>
            <option [ngValue]="null">No Discount</option>
            <option value="fixed">Fixed</option>
            <option value="percentage">Percentage</option>
          </select>
        </div>
        <div class="form-row">
          <button class="icon-btn">
            <lucide-icon (click)="addItem()" name="Check"></lucide-icon>
          </button>
        </div>
      </div>
    </div>

    <div class="grid-wrapper">
      <app-grid
        [items]="items"
        [settings]="[
        { label: 'Product', bindProperty: 'productId' },
        { label: 'Quantity', bindProperty: 'quantity' },
        { label: 'Unit Price', bindProperty: 'unitPrice' },
        { label: 'Discount', bindProperty: 'discount' },
        { label: 'Discount Type', bindProperty: 'discountType' }
      ]"
        [total]="items.length"
      >
      </app-grid>
    </div>

    <div class="form-row">
      <textarea formControlName="note" placeholder="Note..." rows="3"></textarea>
    </div>
  </form>
</app-modal>
