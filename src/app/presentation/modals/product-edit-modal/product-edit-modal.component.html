<app-modal (cancel)="close.emit()" (save)="onSubmit()" title="Edit Product">
  <form [formGroup]="form" class="edit-form">
    <div class="form-row">
      <div class="checkbox-group">
        <label>Active</label>
        <input class="checkbox" formControlName="isActive" type="checkbox"/>
      </div>
    </div>

    <div class="form-row">
      <label>SKU</label>
      <input formControlName="sku" type="text"/>
    </div>

    <div class="form-row">
      <label>Price</label>
      <input formControlName="price" type="number"/>
    </div>

    <div class="form-row">
      <label>Stock</label>
      <input formControlName="stock" type="number"/>
    </div>

    <app-product-translation [formArray]="translations"></app-product-translation>

    <!--    <div class="section">-->
    <!--      <h4>Translations</h4>-->
    <!--      <div formArrayName="translations">-->
    <!--        @for (t of translations.controls; let i = $index; track t.value.lang) {-->
    <!--          <div [formGroupName]="i" class="translation-block">-->
    <!--            <input formControlName="lang" placeholder="Lang (e.g. ua)"/>-->
    <!--            <input formControlName="name" placeholder="Name"/>-->
    <!--            <textarea formControlName="description" placeholder="Description"></textarea>-->
    <!--          </div>-->
    <!--        }-->
    <!--      </div>-->
    <!--    </div>-->

    <div class="section">
      <h4>Details</h4>
      <div formArrayName="details">
        @for (d of details.controls; let i = $index; track d.value.key) {
          <div [formGroupName]="i" class="detail-block">
            <input formControlName="key" placeholder="Key"/>
            <input formControlName="value" placeholder="Value"/>
          </div>
        }
      </div>
    </div>

    <div class="section">
      <h4>Images (max 3)</h4>
      <div formArrayName="images">
        @for (img of images.controls; let i = $index; track img) {
          <div [formGroupName]="i">
            <input formControlName="url" placeholder="Image URL"/>
          </div>
        }
      </div>
    </div>

    <div class="section">
      <h4>Discounts</h4>
      <div formGroupName="discount">
        <input formControlName="amount" placeholder="Amount" type="number"/>
        <select formControlName="type">
          <option value="FIXED">Fixed</option>
          <option value="PERCENTAGE">Percentage</option>
        </select>
        <input formControlName="validFrom" type="date"/>
        <input formControlName="validUntil" type="date"/>
      </div>
    </div>
  </form>
</app-modal>
